{% extends "sales/base_sales.html" %}
{% load i18n static %}

{% block sales_content %}
<div class="invoice-container card shadow-sm p-4">
  <!-- ===== Ø±Ø£Ø³ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ===== -->
  <div class="d-flex justify-content-between align-items-center border-bottom pb-3 mb-3">
    <div class="d-flex align-items-center">
      <img src="{% static 'images/logo.png' %}" alt="Logo" width="70" class="me-3">
      <div>
        <h4 class="mb-0 text-primary fw-bold">Django Inventory & Sales</h4>
        <small class="text-muted">{% trans "Professional Invoice System" %}</small>
      </div>
    </div>
    <div class="text-end">
      <h5 class="mb-1">{% trans "Invoice" %} #{{ sale.id }}</h5>
      <p class="text-muted mb-0">{{ sale.date|date:"Y-m-d H:i" }}</p>
    </div>
  </div>

  <!-- ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ ===== -->
  <div class="row mb-4">
    <div class="col-md-6">
      <h6 class="fw-bold mb-1">{% trans "Billed To" %}:</h6>
      <p class="mb-0">{{ sale.customer_name|default:"â€”" }}</p>
    </div>
    <div class="col-md-6 text-md-end">
      <h6 class="fw-bold mb-1">{% trans "Payment Status" %}:</h6>
      <p class="text-success fw-bold mb-0">{% trans "Paid" %}</p>
    </div>
  </div>

  <!-- ===== Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ===== -->
  <table class="table table-bordered align-middle">
    <thead class="table-primary text-center">
      <tr>
        <th>{% trans "Product" %}</th>
        <th>{% trans "Quantity" %}</th>
        <th>{% trans "Unit Price" %}</th>
        <th>{% trans "Subtotal" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
      <tr class="text-center">
        <td>{{ item.product.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.price|floatformat:2 }}</td>
        <td>{{ item.subtotal|floatformat:2 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- ===== Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ ===== -->
  <div class="d-flex justify-content-end mt-3">
    <table class="table table-borderless w-auto">
      <tr>
        <th class="text-end pe-4">{% trans "Total Amount:" %}</th>
        <td class="fw-bold text-primary fs-5">{{ sale.total_amount|floatformat:2 }} EGP</td>
      </tr>
    </table>
  </div>

  <!-- ===== ØªØ°ÙŠÙŠÙ„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ===== -->
  <div class="border-top pt-3 mt-4 text-center text-muted small">
    {% trans "Thank you for your business!" %}<br>
    <span class="text-secondary">{% trans "Generated by Django Inventory System" %}</span>
  </div>

  <!-- ===== Ø§Ù„Ø£Ø²Ø±Ø§Ø± ===== -->
  <div class="text-end mt-4">
    <button class="btn btn-outline-primary" onclick="window.print()">
      ðŸ§¾ {% trans "Print / Save PDF" %}
    </button>
  </div>
</div>

<!-- ===== ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Øµ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© ===== -->
<style>
@media print {
  body * {
    visibility: hidden;
  }
  .invoice-container, .invoice-container * {
    visibility: visible;
  }
  .invoice-container {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    padding: 40px;
  }
  button, nav, footer {
    display: none !important;
  }
}
</style>
{% endblock %}
